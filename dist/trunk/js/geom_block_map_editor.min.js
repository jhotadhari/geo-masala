!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){(function(d){!function(a){"object"==typeof c&&void 0!==b?b.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:this).loadJS=a()}(function(){return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){return f(c[h][1][a]||a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){function d(){function a(a){"string"==typeof a&&(a={url:a});var d=a.id||a.url,e=b[d];if(e)return console.log("load-js: cache hit",d),e;if(!1!==a.allowExternal){var f=function(a){var b=a&&document.getElementById(a);if(b&&"watermark"!==b.loadJS)return console.warn("load-js: duplicate script with id:",a),b}(a.id)||function(a){var b=a&&document.querySelector("script[src='"+a+"']");if(b&&"watermark"!==b.loadJS)return console.warn("load-js: duplicate script with url:",a),b}(a.url);if(f){var g=Promise.resolve(f);return d&&(b[d]=g),g}}if(!a.url&&!a.text)throw new Error("load-js: must provide a url or text to load");var h=(a.url?function(a,b){return new Promise(function(c,d){var e=!1;b.onload=b.onreadystatechange=function(){e||b.readyState&&"loaded"!==b.readyState&&"complete"!==b.readyState||(e=!0,b.onload=b.onreadystatechange=null,c(b))},b.onerror=d,a.appendChild(b)})}:function(a,b){return a.appendChild(b),Promise.resolve(b)})(c,function(a){var b=document.createElement("script");return b.charset=a.charset||"utf-8",b.type=a.type||"text/javascript",b.async=!!a.async,b.id=a.id||a.url,b.loadJS="watermark",a.url&&(b.src=a.url),a.text&&(b.text=a.text),b}(a));return d&&!1!==a.cache&&(b[d]=h),h}var b={},c=document.getElementsByTagName("head")[0]||document.documentElement;return function(b){return b instanceof Array?Promise.all(b.map(a)):a(b)}}b.exports=d(),b.exports.create=d},{}]},{},[1])([1])})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={controls:{searchControl:!0,fullscreenControl:!0,loadingControl:!0,layersControl:["OpenStreetMap.Mapnik","OpenTopoMap"],viewZoomControl:["FlyToAction","ZoomLocationAction"]},mapDimensions:{width:100,height:400},options:{placeholder:{color:"#af63aa"}},leaflet:{mapOptions:{center:[28,80],zoom:3,scrollWheelZoom:!0,touchZoom:!0},flyToBounds:{maxZoom:12,animate:!0,duration:.75},popupOptions:{minWidth:50,maxWidth:300,maxHeight:null,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,autoPan:!0,keepInView:!1,className:""},iconOptions:{iconUrl:geomData.pluginDirUrl+"/images/leaflet/marker-icon.png",iconRetinaUrl:"",iconSize:{x:25,y:41},iconAnchor:{x:12,y:41},shadowUrl:geomData.pluginDirUrl+"/images/leaflet/marker-shadow.png",shadowRetinaUrl:"",shadowSize:{x:41,y:41},shadowAnchor:{x:12,y:41},popupAnchor:{x:1,y:-34}},polylineOptions:{stroke:!0,color:"#3388ff",weight:3,opacity:1,fillColor:"#3388ff",fillOpacity:.2,className:"",interactive:!0,smoothFactor:1}}};c.default=d},{}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b){return void 0===b||"string"!=typeof b?null:b.split(".").reduce(function(a,b){return a&&"undefined"!==a[b]?a[b]:void 0},a)};c.default=d},{}],4:[function(a,b,c){(function(b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=a("load-js"),f=c(e),g="undefined"!=typeof window?window._:void 0!==b?b._:null,h=(c(g),a("./geom_block_map/defaults")),i=c(h),j=a("./geom_block_map/functions/getNestedObject"),k=c(j),l=a("./geom_block_map_editor/components/MapPlaceholder.jsx"),m=c(l),n=wp.i18n.__;(0,wp.blocks.registerBlockType)("geom/map",{title:n("Geo Masala Map"),icon:"location-alt",category:"widgets",supports:{html:!1},attributes:{featureIds:{type:"array",default:[]},controls:{type:"string",default:JSON.stringify(d({},i.default.controls))},mapDimensions:{type:"string",default:JSON.stringify(d({},i.default.mapDimensions))},mapOptions:{type:"string",default:JSON.stringify(d({},i.default.leaflet.mapOptions))},options:{type:"string",default:JSON.stringify(d({},i.default.options))}},edit:function(a){var b=a.attributes,c=(a.className,a.setAttributes),d=b.featureIds,e=b.controls,g=b.mapOptions,h=b.mapDimensions,i=b.options,j=JSON.parse(void 0===e?"{}":e),l=JSON.parse(void 0===g?"{}":g),n=JSON.parse(void 0===h?"{}":h),o=JSON.parse(void 0===i?"{}":i);return void 0===(0,k.default)(geomData,"modules.GeomMap")?((0,f.default)([geomData.pluginDirUrl+"/js/geom_block_map_module_GeomMap.min.js"]).then(function(){return c({nonsense:!0})}),[React.createElement(m.default,{color:o.placeholder.color,dimensions:n})]):React.createElement(geomData.modules.GeomMap,{featureIds:d,controls:j,mapOptions:l,mapDimensions:n,options:o,onChangeFeatures:function(a){return a instanceof Backbone.Collection?c({featureIds:a.length?a.pluck("id"):[]}):null},onChangeControls:function(a){return c({controls:JSON.stringify(a)})},onChangeMapOptions:function(a){return c({mapOptions:JSON.stringify(a)})},onChangeMapDimensions:function(a){return c({mapDimensions:JSON.stringify(a)})},onChangeOptions:function(a){return c({options:JSON.stringify(a)})}})},save:function(a){return a.attributes,a.className,null}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./geom_block_map/defaults":2,"./geom_block_map/functions/getNestedObject":3,"./geom_block_map_editor/components/MapPlaceholder.jsx":5,"load-js":1}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("../../geom_block_map/defaults"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(a){var b=a.color,c=a.dimensions,d={width:c.width+"%",height:c.height+"px",margin:"0 auto"};return[React.createElement("div",{className:"geom-placeholder",style:d},React.createElement("div",{className:"geom-placeholder-overlay"},React.createElement("div",{className:"geom-placeholder-overlay-spinner",style:{backgroundColor:b}})))]};f.defaultProps={color:e.default.options.placeholder.color,dimensions:{width:100,height:300}},c.default=f},{"../../geom_block_map/defaults":2}]},{},[4]);